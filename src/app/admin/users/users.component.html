<div class="container-fluid user-view">
    <div class="">
        <form (ngSubmit)="onSubmit(f)" #f="ngForm">
            <div class="row d-flex justify-content-around">
                <div class="form-group1 d-flex justify-content-around col-sm-2 col-md-2 col-lg-2 col-xl-2">
                    <input type="text" id="username" class="form-control" placeholder="Username" ngModel name="username" required>
                </div>
                <div class="form-group1 d-flex justify-content-around col-sm-2 col-md-2 col-lg-2 col-xl-2">
                    <input type="text" id="email" class="form-control" placeholder="Email" ngModel name="email" required>
                </div>
                <div class="form-group1 d-flex justify-content-around col-sm-2 col-md-2 col-lg-2 col-xl-2">
                    <input type="text" id="name" class="form-control" placeholder="name" ngModel name="name" required>
                </div>
                <div class="form-group1 d-flex justify-content-around col-sm-2 col-md-2 col-lg-2 col-xl-2">
                    <input type="password" id="psw" class="form-control" placeholder="Password" ngModel name="password" required>

                </div>
                <div class="form-group1 d-flex justify-content-around col-sm-2 col-md-2 col-lg-2 col-xl-2">
                    <button class="btn btn-primary" type="submit" id="subBtn">Add</button>
                </div>

            </div>


        </form>
    </div>

    <div class="user-view">
        <table class="fixed_header">
            <thead>
                <tr>
                    <th class="row-username">Username</th>
                    <th class="row-username">Email</th>
                    <th class="row-password">Password</th>
                    <th class="row-name">Name</th>
                    <th  class="row-context">Rol</th>
                    <th  class="row-context">Punct de lucru</th>
                    <th class="row-actions">
                        Actions
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let user of usersList ; let i = index" >

                    <td class="row-name">{{user.username}} </td>
                    <td class="row-email">{{user.email}}</td>
                    <td class="row-pwd">
                        <input class="form-control form-control-sm" type="text" placeholder="New password"
                            (click)="$event.target.select()" #pwd>
                    </td>
                    <td class="row-name">{{user.name}}</td>

                    <td class="row-role">
                        <select class="form-control form-control-sm" #roleSelet 
                            (change)='onRowSelectOption("role",roleSelet.value, user, i)'>
                            <!-- [selected] is used only here. proprety is set only if condition is true -->
                            <option *ngFor="let item of rolesList" value={{item.id}}
                                [selected]="user.role ? (item.id==user.role.id) : (item.name=='anonim')">{{item.name}}
                            </option>
                        </select>
                    </td>

                    <td class="row-context">
                        <select class="form-control form-control-sm" #contextSelet 
                            (change)='onRowSelectOption("role",roleSelet.value, user, i)'>
                            <!-- [selected] is used only here. proprety is set only if condition is true -->
                            <option *ngFor="let item of contextesList" value={{item.id}}
                                [selected]="user.context ? (item.id==user.context.id) : (item.name=='anonim')">{{item.name}}
                            </option>
                        </select>
                    </td>

                    <td class=" row-actions">
                        <span class="material-icons text-primary" title="Save" role="button" (click)="update(user,i)">
                            save
                        </span>
                        <span class="material-icons text-danger" title="Delete" role="button" (click)="delete(user,i)">
                            delete
                        </span>
                    </td>

                </tr>
            </tbody>
        </table>


    </div>


</div>
